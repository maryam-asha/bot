# ๐ง ุฅุตูุงุญ ูุดููุฉ ุงูุชููู ูู ุงูุฌูุงุช

## โ ุงููุดููุฉ ุงูุฃุตููุฉ
ุนูุฏ ุญุฏูุซ ุฎุทุฃ ูู `get_side_children` ุฃู `get_parent_sides`ุ ูุงู ุงููุธุงู ูุนูุฏ ูุจุงุดุฑุฉ ุฅูู `SERVICE_MENU` ุจุฏูุงู ูู ูุนุงูุฌุฉ ูู ุญุงูุฉ ูุญุงูุฉ ูููุตูุฉ.

## โ ุงูุญููู ุงููุทุจูุฉ

### **1. ุฅุถุงูุฉ ุญุงูุงุช ุฌุฏูุฏุฉ ูู `ConversationState`:**
```python
class ConversationState(IntEnum):
    # ... ุงูุญุงูุงุช ุงูููุฌูุฏุฉ ...
    SELECT_PARENT_SIDES = 19      # โ ุฌุฏูุฏ: ุงุฎุชูุงุฑ ุงูุฌูุงุช ุงูุฑุฆูุณูุฉ
    SELECT_SIDE_CHILDREN = 20     # โ ุฌุฏูุฏ: ุงุฎุชูุงุฑ ุงูุฌูุงุช ุงููุฑุนูุฉ
```

### **2. ุชุญุฏูุซ `STATE_TRANSITIONS`:**
```python
STATE_TRANSITIONS: Dict[ConversationState, ConversationState] = {
    # ... ุงูุงูุชูุงูุงุช ุงูููุฌูุฏุฉ ...
    ConversationState.SELECT_PARENT_SIDES: ConversationState.SERVICE_MENU,
    ConversationState.SELECT_SIDE_CHILDREN: ConversationState.SELECT_COMPLIMENT_SIDE
}
```

### **3. ุฅุตูุงุญ `get_parent_sides`:**
```python
# ูุจู ุงูุชุนุฏูู (ุฎุทุฃ)
except Exception as e:
    # ... ูุนุงูุฌุฉ ุงูุฎุทุฃ ...
    return ConversationState.SERVICE_MENU  # โ ูุนูุฏ ูู service_menu

# ุจุนุฏ ุงูุชุนุฏูู (ุตุญูุญ)
except Exception as e:
    # ... ูุนุงูุฌุฉ ุงูุฎุทุฃ ...
    return ConversationState.MAIN_MENU  # โ ูุนูุฏ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
```

### **4. ุฅุตูุงุญ `get_side_children`:**
```python
# ูุจู ุงูุชุนุฏูู (ุฎุทุฃ)
except Exception as e:
    # ... ูุนุงูุฌุฉ ุงูุฎุทุฃ ...
    return ConversationState.SERVICE_MENU  # โ ูุนูุฏ ูู service_menu

# ุจุนุฏ ุงูุชุนุฏูู (ุตุญูุญ)
except Exception as e:
    # ... ูุนุงูุฌุฉ ุงูุฎุทุฃ ...
    return ConversationState.SELECT_COMPLIMENT_SIDE  # โ ูุนูุฏ ููุฌูุงุช
```

## ๐ ููููุฉ ุนูู ุงููุธุงู ุงูุฌุฏูุฏ

### **1. ุชุชุจุน ุงูุฎุทูุงุช:**
```
ุงููุณุชุฎุฏู ูุจุฏุฃ: [MAIN_MENU]
ูุฎุชุงุฑ "ุชูุฏูู ุทูุจ": [MAIN_MENU, SELECT_PARENT_SIDES, SELECT_COMPLIMENT_SIDE]
ูุฎุชุงุฑ ุงูุฌูุฉ ุงูุฑุฆูุณูุฉ: [MAIN_MENU, SELECT_PARENT_SIDES, SELECT_COMPLIMENT_SIDE, SELECT_SIDE_CHILDREN]
ูุฎุชุงุฑ ุงูุฌูุฉ ุงููุฑุนูุฉ: [MAIN_MENU, SELECT_PARENT_SIDES, SELECT_COMPLIMENT_SIDE, SELECT_SIDE_CHILDREN, SELECT_REQUEST_TYPE]
```

### **2. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:**
```
ุฎุทุฃ ูู get_parent_sides โ ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
ุฎุทุฃ ูู get_side_children โ ุงูุนูุฏุฉ ูุงุฎุชูุงุฑ ุงูุฌูุงุช
ุฎุทุฃ ูู get_request_type โ ุงูุนูุฏุฉ ูุงุฎุชูุงุฑ ุงูุฌูุงุช
```

## ๐ฑ ูุซุงู ุนูู ุงูุชุฏูู

### **ูุจู ุงูุชุนุฏูู (ุฎุทุฃ):**
```
1. ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
2. ุงุฎุชูุงุฑ "ุชูุฏูู ุทูุจ"
3. ุฎุทุฃ ูู get_parent_sides
4. ูุนูุฏ ุฅูู service_menu โ (ุฎุทุฃ)
```

### **ุจุนุฏ ุงูุชุนุฏูู (ุตุญูุญ):**
```
1. ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
2. ุงุฎุชูุงุฑ "ุชูุฏูู ุทูุจ"
3. ุฎุทุฃ ูู get_parent_sides
4. ูุนูุฏ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ โ (ุตุญูุญ)
```

### **ูุซุงู ุขุฎุฑ:**
```
1. ุงุฎุชูุงุฑ ุงูุฌูุฉ ุงูุฑุฆูุณูุฉ
2. ุฎุทุฃ ูู get_side_children
3. ูุนูุฏ ูุงุฎุชูุงุฑ ุงูุฌูุงุช โ (ุตุญูุญ)
4. ูุง ูุนูุฏ ูู service_menu โ (ูุงู ุฎุทุฃ)
```

## ๐ง ุงูุชุนุฏููุงุช ุงููุทุจูุฉ

### **โ ูู `config/conversation_states.py`:**
1. **ุฅุถุงูุฉ ุญุงูุงุช ุฌุฏูุฏุฉ:** `SELECT_PARENT_SIDES`, `SELECT_SIDE_CHILDREN`
2. **ุชุญุฏูุซ `STATE_TRANSITIONS`:** ูุณุงุฑุงุช ุงูุนูุฏุฉ ุงูุตุญูุญุฉ
3. **ุฅุตูุงุญ `FILL_FORM`:** ูุนูุฏ ุฅูู `SELECT_SERVICE`

### **โ ูู `bot.py`:**
1. **ุชุญุฏูุซ `get_parent_sides`:** ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ ุนูุฏ ุงูุฎุทุฃ
2. **ุชุญุฏูุซ `get_side_children`:** ุงูุนูุฏุฉ ููุฌูุงุช ุนูุฏ ุงูุฎุทุฃ
3. **ุฅุถุงูุฉ ุชุชุจุน ุงูุฎุทูุงุช:** `add_step_to_history`
4. **ุชุญุฏูุซ `handle_back`:** ูุนุงูุฌุฉ ุงูุญุงูุงุช ุงูุฌุฏูุฏุฉ

## ๐ฏ ุงููุฒุงูุง ุงูุฌุฏูุฏุฉ

### **โ ูุนุงูุฌุฉ ููุทููุฉ ููุฃุฎุทุงุก:**
- ูู ุญุงูุฉ ุชุนุงูู ูุญุงูุฉ ูููุตูุฉ
- ุงูุนูุฏุฉ ููุฎุทูุฉ ุงูููุงุณุจุฉ ุนูุฏ ุงูุฎุทุฃ
- ุนุฏู ุงูููุฒ ูู `service_menu` ุชููุงุฆูุงู

### **โ ุชุชุจุน ุฏููู ููุฎุทูุงุช:**
- ุญูุธ ุฌููุน ุงูุฎุทูุงุช ูู ุงูุชุงุฑูุฎ
- ุฅููุงููุฉ ุงูุนูุฏุฉ ููุฎุทูุฉ ุงูุณุงุจูุฉ
- ุชููู ููุทูู ุจูู ุงูุญุงูุงุช

### **โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ:**
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- ุนูุฏุฉ ููุทููุฉ ุนูุฏ ุงูุฎุทุฃ
- ุนุฏู ููุฏุงู ุงูุชูุฏู

## ๐ ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ

### **1. ุงุฎุชุจุงุฑ `get_parent_sides`:**
```
- ุงุฎุชูุงุฑ "ุชูุฏูู ุทูุจ"
- ูุญุงูุงุฉ ุฎุทุฃ ูู API
- ุงูุชุฃูุฏ ูู ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
```

### **2. ุงุฎุชุจุงุฑ `get_side_children`:**
```
- ุงุฎุชูุงุฑ ุฌูุฉ ุฑุฆูุณูุฉ
- ูุญุงูุงุฉ ุฎุทุฃ ูู API
- ุงูุชุฃูุฏ ูู ุงูุนูุฏุฉ ูุงุฎุชูุงุฑ ุงูุฌูุงุช
```

### **3. ุงุฎุชุจุงุฑ ุงูุชุฏูู ุงููุงูู:**
```
- ุงุชุจุน ุฌููุน ุงูุฎุทูุงุช
- ุงุถุบุท "ุงูุฑุฌูุน" ูู ูู ุฎุทูุฉ
- ุชุฃูุฏ ูู ุงูุนูุฏุฉ ููุฎุทูุฉ ุงูุณุงุจูุฉ
```

## ๐จ ุญุงูุงุช ุงูุฎุทุฃ ุงููุนุงูุฌุฉ

### **ุฎุทุฃ ูู `get_parent_sides`:**
- **ุงูุนูุฏุฉ:** `ConversationState.MAIN_MENU`
- **ุงูุณุจุจ:** ูุง ูููู ุงููุตูู ููุฌูุงุชุ ุงูุนูุฏุฉ ููุจุฏุงูุฉ

### **ุฎุทุฃ ูู `get_side_children`:**
- **ุงูุนูุฏุฉ:** `ConversationState.SELECT_COMPLIMENT_SIDE`
- **ุงูุณุจุจ:** ูููู ุฅุนุงุฏุฉ ูุญุงููุฉ ุงุฎุชูุงุฑ ุงูุฌูุฉ

### **ุฎุทุฃ ูู `get_request_type`:**
- **ุงูุนูุฏุฉ:** `ConversationState.SELECT_COMPLIMENT_SIDE`
- **ุงูุณุจุจ:** ูููู ุฅุนุงุฏุฉ ูุญุงููุฉ ุงุฎุชูุงุฑ ุงูุฌูุฉ

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุจุนุฏ ูุฐุง ุงูุฅุตูุงุญ:
- โ **ูู ุญุงูุฉ ุชุนุงูู ูุญุงูุฉ ูููุตูุฉ**
- โ **ูุนุงูุฌุฉ ููุทููุฉ ููุฃุฎุทุงุก**
- โ **ุนุฏู ุงูุนูุฏุฉ ุงูุชููุงุฆูุฉ ูู service_menu**
- โ **ุชููู ููุทูู ุจูู ุงูุญุงูุงุช**
- โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ**

---

**ููุงุญุธุฉ:** ุงูุขู ุงููุธุงู ูุนุงูู ูู ุญุงูุฉ ูููุตูุฉ ููุง ูุนูุฏ ุชููุงุฆูุงู ูู `service_menu` ุนูุฏ ุญุฏูุซ ุฎุทุฃ!