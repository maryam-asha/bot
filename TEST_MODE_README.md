# وضع الاختبار - التوكن الستاتيكي 🧪

## 🎯 الغرض

هذا الوضع مخصص للاختبار فقط، حيث يتم اعتبار المستخدم مصادق عليه تلقائياً بدون الحاجة لإدخال رقم الهاتف أو رمز التحقق.

## ⚙️ الإعدادات

### 1. **تفعيل وضع الاختبار**
في `handlers/auth_handler.py`:

```python
# للاختبار فقط - توكن ستاتيكي
self.TEST_MODE = True  # تغيير هذا إلى False لإعادة تفعيل المصادقة الحقيقية
self.STATIC_TOKEN = "test_token_12345"  # توكن ستاتيكي للاختبار
```

### 2. **تخصيص التوكن**
يمكنك تغيير `STATIC_TOKEN` إلى أي قيمة تريدها:

```python
self.STATIC_TOKEN = "your_custom_test_token_here"
```

### 3. **تخصيص رقم الهاتف الافتراضي**
```python
context.user_data['mobile'] = '0947800974'  # رقم افتراضي للاختبار
```

## 🚀 كيفية العمل

### 1️⃣ **بدء البوت**
```
/start → فحص المصادقة → المستخدم مصادق عليه تلقائياً → قائمة الخدمات
```

### 2️⃣ **تخطي المصادقة**
- لا حاجة لإدخال رقم الهاتف
- لا حاجة لإدخال رمز التحقق
- المستخدم يعتبر مصادق عليه من البداية

### 3️⃣ **الرسائل في وضع الاختبار**
```
"TEST MODE: User automatically authenticated"
"TEST MODE: Skipping authentication, user automatically authenticated"
"TEST MODE: تم تسجيل الدخول تلقائياً! 🎉"
```

## 📋 الميزات في وضع الاختبار

### ✅ **ما يعمل تلقائياً:**
- فحص المصادقة → `True` دائماً
- تخزين التوكن الستاتيكي
- تحديث API service token
- الانتقال المباشر لقائمة الخدمات

### ⏭️ **ما يتم تخطيه:**
- إدخال رقم الهاتف
- إرسال رمز التحقق
- التحقق من رمز التحقق
- انتظار المصادقة

## 🔄 العودة للمصادقة الحقيقية

### 1. **تغيير الإعداد**
```python
self.TEST_MODE = False  # إعادة تفعيل المصادقة الحقيقية
```

### 2. **إعادة تشغيل البوت**
```bash
python bot_with_router.py
```

### 3. **النتيجة**
- المستخدم سيحتاج لإدخال رقم الهاتف
- المستخدم سيحتاج لإدخال رمز التحقق
- المصادقة تعمل بشكل طبيعي

## 🧪 سيناريوهات الاختبار

### 1️⃣ **اختبار تدفق العمل**
```
/start → قائمة الخدمات (بدون مصادقة)
اختر "طلباتي" → عرض الطلبات
اختر "تقديم طلب" → اختيار الجهة
```

### 2️⃣ **اختبار القوائم**
```
القائمة الرئيسية → سمعنا صوتك → قائمة الخدمات
قائمة الخدمات → طلباتي / تقديم طلب
```

### 3️⃣ **اختبار التنقل**
```
العودة للقائمة الرئيسية
التنقل بين الصفحات
```

## 📝 ملاحظات مهمة

### ⚠️ **تحذيرات:**
1. **لا تستخدم في الإنتاج**: هذا الوضع للاختبار فقط
2. **التوكن ثابت**: لا يتغير مع الوقت
3. **أمان منخفض**: المستخدم يعتبر مصادق عليه دائماً

### ✅ **متى تستخدم:**
- اختبار تدفق العمل
- اختبار القوائم
- اختبار التنقل
- اختبار واجهة المستخدم
- تطوير ميزات جديدة

### ❌ **متى لا تستخدم:**
- في البيئة الإنتاجية
- مع مستخدمين حقيقيين
- عند اختبار المصادقة
- عند اختبار الأمان

## 🔧 تخصيص إضافي

### 1. **تغيير رسائل الاختبار**
```python
await update.message.reply_text(
    "رسالة مخصصة للاختبار! 🎯",
    # ... باقي الكود
)
```

### 2. **إضافة بيانات افتراضية**
```python
context.user_data['test_data'] = {
    'user_id': 12345,
    'username': 'test_user',
    'role': 'admin'
}
```

### 3. **تخصيص التوكن حسب المستخدم**
```python
if update.message.from_user.id == 12345:
    self.STATIC_TOKEN = "admin_test_token"
else:
    self.STATIC_TOKEN = "user_test_token"
```

## 🚀 التشغيل

```bash
# تشغيل البوت مع وضع الاختبار
python bot_with_router.py

# في تيليجرام
/start
```

## 📊 النتيجة المتوقعة

### ✅ **في وضع الاختبار:**
```
2025-08-28 12:00:00 - handlers.auth_handler - INFO - TEST MODE: User automatically authenticated
2025-08-28 12:00:01 - handlers.auth_handler - INFO - TEST MODE: Skipping authentication, user automatically authenticated
```

### 🔒 **في الوضع العادي:**
```
2025-08-28 12:00:00 - handlers.auth_handler - INFO - No token found, requesting authentication
2025-08-28 12:00:01 - handlers.auth_handler - INFO - Please enter your mobile number
```

---

**🎯 الآن يمكنك اختبار البوت بدون الحاجة للمصادقة!**